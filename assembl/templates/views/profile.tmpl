{% macro form(name, title, image) %}
  {% if name in providers %}
  <form id="{{name}}" class="mts" method="post" action="/login/{{name}}">
  {% for k,v in kwargs.items() %}
      <input type="hidden" name="{{ k }}" value="{{ v }}" />
  {% endfor %}

  {% if name == "openid" %}
  		{# Need to be refactored #}
      {#<div class="openid-icon-bg"></div><input type="text" class="openid-bg" name="openid_identifier" class="form-control" />#}
  {% endif %}
  {% if name == "google" %}
     <button type="submit" class="g-bg mbs">{{title}}</button>
  {% endif %}
  {% if name == "twitter" %}
     <button type="submit" class="twi-bg mbs">{{title}}</button>
  {% endif %}
  {% if name == "facebook" %}
     <button type="submit" class="fb-bg mbs">{{title}}</button>
  {% endif %}

  </form>
  {% endif %}
{% endmacro %}


<div class="gr">
  <div class="gu gu-1of5">
    <nav class="sidebar-nav">
        <ul class="man pan adminMenu">
          <li class="active">
            <a href="{{ user_profile_edit_url }}" class="menu">{{ gettext('profile') }}</a>
          </li>
          <li>
            <a href="#users/notifications" class="menu">{{ gettext('notifications') }}</a>
          </li>
          <li class="mtxl">
            <a href="/{{ discussion.slug }}/">{{ gettext('back to discussion') }}</a>
          </li>
        </ul>
    </nav>
  </div>
  <div class="gu gu-3of4 admin-section">
    <div class="admin-title">
      <h3 class="h3">Profile</h3>
    </div>
    <div id="content-container" class="content-container">
      <div class="bx bx-alert-success hidden">
				<button class="btn btn-cancel btn-xs bx-close" type="button">
					<i class="icon-delete"></i>
				</button>
				{{ gettext("Your settings were saved") }}
			</div>
      <div class="gr">
        <div class="gu gu-1of1">
          <form class="core-form form-horizontal" id="profile-form">
            <fieldset>

							<div class="control-group fr">
								<label for="name" class="control-label fl">{{ gettext('Name') }}</label>
								<div class="controls fl">
										<input class="input-xxlarge" type="text" name="name" placeholder="{{ gettext('Your name') }}" value="<%= profile.get('name') %>" />
								</div>
							</div>

              <div class="control-group fr mbxl">
                <label for="username" class="control-label fl">{{ gettext('Username') }}</label>
                <div class="controls fl">
                    <input class="input-xxlarge" type="text" name="username" placeholder="{{ gettext('Desired username') }}" value="<%= profile.get('username') %>" />
                </div>
              </div>

              <div class="control-group fr">
                <label for="password1" class="control-label fl">{{ gettext('Change password') }}</label>
                <div class="controls fl">
                  <input class="input-xxlarge" type="password" name="password1" placeholder="{{ gettext('New Password') }}" />
                </div>
              </div>

              <div class="control-group fr mbxl">
                <label for="password2" class="control-label fl">{{ gettext('Repeat password') }}</label>
                <div class="controls fl">
                  <input class="input-xxlarge" type="password" name="password2" placeholder="{{ gettext('Repeat password') }}" />
                </div>
              </div>

              <div class="control-group fr">
                <label for="add_email" class="control-label fl">{{ gettext('Emails') }}</label>
                <div class="controls fl">
                   <input class="input-xxlarge" type="email" name="add_email" placeholder="{{ gettext('Email') }}" />
                   <div class="mts"><a href="#"><i class="icon-add"></i>{{ gettext('Add an email account') }}</a></div>
                   <p class="email-helper mts">{{ gettext('Add a new e-mail address used to connect and contribute with the same account from multiple emails') }}</p>
                </div>
              </div>

              <div class="control-group fr mtl">
								<label for="add_email" class="control-label">{{ gettext('link your email account') }}</label>
								<div class="controls fl">
                   <div class="social-content">
                     <button class="fb-bg mbs">{{ gettext('sign in with facebook') }}</button>
                   	 <button class="twi-bg mbs">{{ gettext('sign in with twitter') }}</button>
                   	 <button class="g-bg mbs">{{ gettext('sign in with google+') }}</button>

                   	 {#{{form('google', gettext('Login with Google'), true)}}
										 {{form('twitter', gettext('Login with Twitter'), true)}}
										 {{form('facebook', gettext('Login with Facebook'), true)}}
										 {{form('yahoo', gettext('Login with Yahoo'), true, oauth='true', openid_identifier='yahoo.com')}}
										 {{form('live', gettext('Login with Windows Live'), false)}}
										 {{form('github', gettext('Login with Github'), false)}}
										 {{form('bitbucket', gettext('Login with Bitbucket'), false)}}
										 {{form('openid', gettext('Login with OpenID'), true)}}#}

                     <p class="social-helper mts">{{ gettext('Add a new e-mail address used to connect and contribute with the same account from multiple emails') }}</p>
                   </div>
								</div>
							</div>
            </fieldset>

						<div class="form-actions pan fl">
							<button class="btn btn-secondary js_saveProfile" type="submit">{{ gettext('save the changes') }}</button>
						</div>
          </form>

          {% if providers %}
					<p>{{ gettext("Connect other accounts to Assembl")|safe }}</p>
					{% endif %}

					{#{{form('google', gettext('Login with Google'), true)}}
					{{form('twitter', gettext('Login with Twitter'), true)}}
					{{form('facebook', gettext('Login with Facebook'), true)}}
					{{form('yahoo', gettext('Login with Yahoo'), true, oauth='true', openid_identifier='yahoo.com')}}
					{{form('live', gettext('Login with Windows Live'), false)}}
					{{form('github', gettext('Login with Github'), false)}}
					{{form('bitbucket', gettext('Login with Bitbucket'), false)}}
					{{form('openid', gettext('Login with OpenID'), true)}} #}
					<div class="spacer spacer--huge"></div>

        </div>
      </div>
    </div>
  </div>
</div>