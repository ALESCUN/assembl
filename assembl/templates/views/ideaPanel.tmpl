
<header class="panel-header">
   <span class="panel-header-title" data-toggle="tooltip" data-placement="top" title="{{gettext('Detailled information about the currently selected idea in the Table of ideas')}}">{{ gettext('Idea') }}</span>

    <div class="fr">
        <% if( idea ) { %>
            {# Commented out, creates infinite loops
            <a href="#" id="session-modal">Create session</a>
            #}
            <a id="ideaPanel-linkbutton" class="iconbutton icon-link" data-copy-text="/idea/<%= escape(idea.getId()) %>" data-toggle="tooltip" title="{{gettext('Copy the link to this idea to clipboard')}}"></a>
        <% } %>
        <% if( !Ctx.displayCallToAction() ){ %>
        <a id="ideaPanel-closebutton" class="iconbutton icon-delete  panel-header-close" data-toggle="tooltip" data-placement="top" title="{{gettext('Close panel')}}"></a>
        <% } %>
    </div>
</header>

<div class="panel-body pas">
    <% if( idea ) { %>
    <fieldset id="ideaPanel-section-summary" class="panel-section">
        <div id="ideaPanel-shorttitle" class="text-bold" data-toggle="tooltip" title="{{gettext('The name of this idea in the table of ideas')}}"></div>
        <% if (canEditNextSynthesis) { %>
        <span>{{ gettext('Expression in next synthesis:') }}</span>
        <div id="ideaPanel-longtitle" data-toggle="tooltip" title="{{gettext('Expression of this idea in the next synthesis.  You may want to edit them all together in the synthesis panel rather than here.')}}"></div>
        <% } %>
        <div id="ideaPanel-definition" data-toggle="tooltip" title="{{gettext('A definition of this idea')}}"></div>
        <p class="text-muted margin">{% set creationDate = "<%= app.formatDate(idea.get('creationDate')) %>" %}</p>
        <div id="ideaPanel-comment"></div>

        {# List votable widgets of this idea #}
        <% _.each(votable_widgets, function(votable_widget, i){
            var url = votable_widget.widget_url+encodeURIComponent("?target="+idea.getId());
            print("<a href=\""+url+"\" target=\"_blank\">{{gettext('Vote on this idea')}}</a>");
            if ( canCreateWidgets ) {
                var configure_url = "/widget/vote/?admin=1#/admin/configure_instance?widget_uri="+votable_widget.widget_uri+"&target="+idea.getId();
                print(" <a href=\""+configure_url+"\" target=\"_blank\">{{gettext('Configure this widget')}}</a>");
            }
         }); %>

        {# Instanciate a widget from this idea #}
        <% if ( canCreateWidgets ) {
            var url = "/widget/vote/?admin=1#/admin/create_from_idea?idea="+encodeURIComponent(idea.getId()+"?view=creativity_widget");
            print(" <a href=\""+url+"\" target=\"_blank\">{{gettext('Create a vote widget on this idea')}}</a>");
        } %>
    </fieldset>

    {#
    <fieldset id="ideaPanel-section-subideas" class="panel-section">
        <legend data-toggle="tooltip" title="{{gettext('The children of this idea.')}}">
            <span><% print(renderTemplateGetSubIdeasLabel(subIdeas)) %></span>
        </legend>
        <div class="idealist">
            <% _.each(subIdeas, function(subIdea, i){ %>
                <div class='subidea'><% print(subIdea.getShortTitleDisplayText()); %></div>
            <% }); %>
        </div>
    </fieldset>
    #}

    <fieldset id="ideaPanel-section-segments" class="panel-section">
        <legend id="ideaPanel-section-segments-legend" data-toggle="tooltip" title="{{gettext('Expressions of this idea in segments of posts or on the web')}}">
            <span><% print(renderTemplateGetExtractsLabel(segments)) %></span>
        </legend>
        <div class="postitlist">
        </div>
        <% if (canAddExtracts) { %>
        <div>
            <p>{{ gettext('Add extracts by dragging them in this panel from the clipboard or messages') }}</p>
        </div>
        <% } %>
    </fieldset>

    <fieldset id="ideaPanel-section-actions" class="panel-section">
        <% if (canDelete) { %>
        <div class="fr">
            <a id="ideaPanel-deleteButton" class="button" data-toggle="tooltip" title="{{gettext('Delete this idea completely')}}">{{ gettext('Delete idea') }}</a>
        </div>
        <% }
        if (canEditExtracts) { %>
        <a id="ideaPanel-clearbutton" class="button" data-toggle="tooltip" title="{{gettext('Remove all extracts from this idea.  Removed extracts will be available in your clipboard')}}">{{ gettext('Remove all extracts') }}</a>
        <% } %>
    </fieldset>
    <% } else { %>
        <div>
            <p>{{ gettext('Please select an idea in the table of ideas') }}</p>
        </div>
    <% } %>
</div>
