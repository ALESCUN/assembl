<div class="panel-body">
    <% if( idea ) { %>
    <fieldset id="ideaPanel-section-summary" class="panel-section mtn">
        <div id="ideaPanel-shorttitle" class="text-bold mbs" data-toggle="tooltip" title="{{gettext('The name of this idea in the table of ideas')}}"></div>
        <% if (canEditNextSynthesis) { %>
          <% if (Ctx.getCurrentInterfaceType() != Ctx.InterfaceTypes.SIMPLE) { %>
            <span class="ideaPanel-legend legend">{{ gettext('Expression in next synthesis') }}</span>
            <div class="ideaPanel-longtitle" class="mbs" data-toggle="tooltip" title="{{gettext('Expression of this idea in the next synthesis.  You may want to edit them all together in the synthesis panel rather than here.')}}"></div>
          <% } %>
        <% } %>

        <% if (Ctx.getCurrentInterfaceType() != Ctx.InterfaceTypes.SIMPLE) { %>
          <span class="ideaPanel-legend legend">{{ gettext('Description of this idea') }}</span>
        <% } %>

        <% if( editing ) { %>
            <div class="ideaPanel-definition-editor"></div>
        <% } else { %>
            <% if (canEdit) { %>
               <% if(idea.get('definition').length){ %>
                 <div class="ideaPanel-definition js_edit-definition" data-toggle="tooltip" title="{{gettext('A description of this idea')}}">
                   <%= idea.get('definition') %>
                 </div>
               <% } else { %>
                 <div class="add-description js_edit-definition">
                   <i class="icon-add"></i> {{ gettext('Add a description') }}
                 </div>
               <% } %>
            <% } else { %>
              <div class="ideaPanel-definition" data-toggle="tooltip" title="{{gettext('A description of this idea')}}">
                 <%= idea.get('definition') %>
              </div>
            <% } %>
        <% } %>

        <div class="ideaPanel-seeMore mts">
          <a href="#" class="seeMore js_seeMore hidden">{{ gettext('See more') }}<i class="icon-arrowdown"></i></a>
          <a href="#" class="seeLess js_seeLess hidden">{{ gettext('See less') }}<i class="icon-arrowup"></i></a>
        </div>
        <p class="text-muted">{% set creationDate = "<%= app.formatDate(idea.get('creationDate')) %>" %}</p>

        {#<% if (Ctx.getCurrentInterfaceType() != Ctx.InterfaceTypes.SIMPLE) { %>
          <div id="ideaPanel-comment"></div>
        <% } %>#}
    </fieldset>

    {# section contributor #}
    <% if( _.size(contributors) ){ %>
    <fieldset class="ideaPanel-section-contributors panel-section pvs">
      <span class="ideaPanel-contributors legend"><i class="icon-user"></i> {{ gettext('contributors') }}</span>
      <div class="gr mts">
         <% _.each(contributors, function(contributor, index, list){ %>
         <div class="gu gu1of6 contributor mrxs">
         <% if(contributor.real_name) { %>
           <a href="#" class="img-left avatar img-rounded" data-toggle="tooltip" data-placement="top" title="<%= contributor.real_name %>">
         <% } else { %>
           <a href="#" class="img-left avatar img-rounded" data-toggle="tooltip" data-placement="top" title="{{ gettext('anonymous') }}">
         <% } %>
             <img src="<%= contributor.avatar_url_base %>30" width="30" height="30">
           </a>
         </div>
         <% }) %>
      </div>
    </fieldset>
    <% } %>
    {#
    <fieldset id="ideaPanel-section-subideas" class="panel-section">
        <legend data-toggle="tooltip" title="{{gettext('The children of this idea.')}}">
            <span><% print(getSubIdeasLabel(subIdeas)) %></span>
        </legend>
        <div class="idealist">
            <% _.each(subIdeas, function(subIdea, i){ %>
                <div class='subidea'><% print(subIdea.getShortTitleDisplayText()); %></div>
            <% }); %>
        </div>
    </fieldset>
    #}

    <fieldset id="ideaPanel-section-segments" class="panel-section">
      <% if(canAddExtracts){ %>
        <div class="ideaPanel-section-segments-legend pvs" data-toggle="tooltip" title="{{gettext('Expressions of this idea in messages or on the web')}}">
           <i class="icon-diamond"></i><span class="legend"><% print(getExtractsLabel()) %></span>
        </div>
      <% } else { %>
      <div class="ideaPanel-section-segments-legend pvs" data-toggle="tooltip" title="">
          <i class="icon-diamond"></i><span class="legend">{{ gettext('Nuggets are important expressions of this idea in messages or on the web') }}</span>
      </div>
      <% } %>

      <div class="postitlist"></div>
      <% if (canAddExtracts) { %>
      <div class="mbs">
          <p>{{ gettext('Add extracts by dragging them in this panel from the clipboard or messages') }}</p>
      </div>
      <% } %>
    </fieldset>

    <fieldset id="ideaPanel-section-actions" class="panel-section">
        <% if (canDelete) { %>
        <div class="fr">
            <a href="#" class="js_ideaPanel-deleteBtn" data-toggle="tooltip" title="{{gettext('Delete this idea completely')}}">{{ gettext('Delete idea') }}</a>
        </div>
        <% }
        if (canEditExtracts) { %>
        <a href="#" class="js_ideaPanel-clearBtn" data-toggle="tooltip" title="{{gettext('Remove all extracts from this idea.  Removed extracts will be available in your clipboard')}}">{{ gettext('Remove all extracts') }}</a>
        <% } %>
    </fieldset>

    {# List votable widgets of this idea
       And show configuration link of this widget if available #}
    <% if ( canUseWidget ) {
      _.each(votable_widgets, function(votable_widget, i){
        var url = votable_widget.widget_url+encodeURIComponent("?target="+idea.getId());
        print("<div class=\"dispb mls mts\">");
        print("<a href=\""+url+"\" target=\"_blank\" class=\"js_openTargetInModal\" data-modal-title=\"{{gettext('Vote on this idea')}}\" data-modal-resizable=\"true\">{{gettext('Vote on this idea')}}</a>");
        if ( canCreateWidgets ) {
            var configure_url = "/static/widget/vote/?admin=1#/admin/configure_instance?widget_uri="+votable_widget.widget_uri+"&target="+idea.getId();
            print(" - <a href=\""+configure_url+"\" target=\"_blank\" class=\"js_openTargetInModal\" data-modal-title=\"{{gettext('Configure this vote widget')}}\">{{gettext('Configure this vote widget')}}</a>");
        }
        print("</div>");
      });
    } %>

    {#
      This version is commented out (we want to show the "Inspire me!" link in the Conversation panel instead of the Idea panel). 
      Show creativity/inspiration widget if available
      And show configuration link of this widget if available
    <% if ( canUseWidget && inspiration_widget_url ){
      print("<div class=\"dispb mls mts\">");
      print("<a href=\"" + inspiration_widget_url + "\" target=\"_blank\" class=\"js_openTargetInModal\" data-modal-title=\"{{gettext('Inspire me!')}}\">{{gettext('Inspire me!')}}</a>");
      if ( canCreateWidgets && inspiration_widget_configure_url ){
        print(" - <a href=\"" + inspiration_widget_configure_url + "\" target=\"_blank\" class=\"js_openTargetInModal js_clearWidgetDataAssociatedToIdea\" data-modal-title=\"{{gettext('Configure this creativity widget')}}\">{{gettext('Configure this creativity widget')}}</a>");
      }
      print("</div>");
    } %>
    #}

    {# 
      If available, show configuration link of the inspiration/creativity widget associated to this idea
    #}
    <% if ( canCreateWidgets && inspiration_widget_configure_url ){
      print("<div class=\"dispb mls mts\">");
      print("<a href=\"" + inspiration_widget_configure_url + "\" target=\"_blank\" class=\"js_openTargetInModal js_clearWidgetDataAssociatedToIdea\" data-modal-title=\"{{gettext('Configure the creativity widget associated to this idea')}}\">{{gettext('Configure the creativity widget associated to this idea')}}</a>");
      print("</div>");
    } %>


    {# Show a widget creation link (inspiration/creativity and vote) from this idea #}
    <% if (Ctx.getCurrentInterfaceType() != Ctx.InterfaceTypes.SIMPLE){
      if ( canCreateWidgets ) {
          var create_vote_widget_url = "/static/widget/vote/?admin=1#/admin/create_from_idea?idea="+encodeURIComponent(idea.getId()+"?view=creativity_widget");
          print("<a href=\""+create_vote_widget_url+"\" target=\"_blank\" class='dispb mls mts js_openTargetInModal' data-modal-title=\"{{gettext('Create a vote widget on this idea')}}\">{{gettext('Create a vote widget on this idea')}}</a>");

          if ( inspiration_widget_create_url ) {
            print("<a href=\"" + inspiration_widget_create_url + "\" target=\"_blank\" class='dispb mls mts js_openTargetInModal js_clearWidgetDataAssociatedToIdea' data-modal-title=\"{{gettext('Create a creativity widget on this idea')}}\">{{gettext('Create a creativity widget on this idea')}}</a>");
          }
      }
    } %>



    <% } else { %>
        <div class="mls mts">
            <p>{{ gettext('Please select an idea in the table of ideas') }}</p>
        </div>
    <% } %>
</div>
