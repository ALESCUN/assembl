<script src="{{ STATIC_URL }}js/bower/requirejs/require.js"></script>

<script>
requirejs.config({
    "baseUrl": "{{ STATIC_URL }}js",
    'urlArgs': "bust=" + (new Date()).getTime(),
    'waitSeconds': 20,
    'shim': {
        'backbone': {
            deps: ['underscore', 'jquery'],
            exports: 'Backbone'
        },
        'underscore': {
            exports: '_'
        },
        'jquery': {
            exports: 'jQuery'
        },
        'jquery-highlight': {
            exports: 'jQuery',
            deps: ['jquery']
        },
        'app': {
            deps: ['annotator', 'ckeditor', 'tipsy', 'i18n', 'jquery-highlight', 'zeroclipboard'],
            exports: 'app'
        },
        'i18n': {
            exports: 'i18n'
        },
        'socket': {
            deps: ['sockjs']
        },
        'jasmine': {
            exports: 'jasmine'
        },
        'jasmine-html': {
            deps: ['jasmine', 'jasmine-jquery'],
            exports: 'jasmine'
        },
        'jasmine-jquery': {
            deps: ['jasmine'],
            exports: 'jasmine'
        },
        'ckeditor': {
            exports: 'CKEDITOR'
        }, 
        'ckeditor-sharedspace': {
            deps: ['ckeditor'],
            exports: 'CKEDITOR'
        },
        'tipsy': {
            deps: ['jquery'],
        },
        'zeroclipboard' : {
            exports: 'ZeroClipboard'
        },
        'sockjs': {
            deps: ['jquery'],
            exports: 'SockJS'
        },
        'cytoscape': {
            deps: ['jquery'],
            exports: 'cytoscape'
        },
        'jit': {
            deps: [],
            exports: '$jit'
        },
        'annotator' : {
            deps: ['jquery'],
            exports: 'Annotator'
        }
    },
    "paths": {
        'app': 'app/app',
        'i18n': 'app/i18n',
        'router': 'app/router',
        'socket': 'app/socket',
        'types': 'app/types',
        'permissions': 'app/permissions',

        'jquery': "bower/jquery/jquery",
        'tipsy': 'bower/tipsy/src/javascripts/jquery.tipsy',
        'jquery-highlight': 'lib/jquery-highlight/jquery.highlight',

        'backbone': 'bower/backbone/backbone',
        'underscore': 'bower/underscore/underscore',

        'annotator': 'lib/annotator/annotator-full.min',

        'jasmine': 'bower/jasmine/lib/jasmine-core/jasmine',
        'jasmine-html': 'bower/jasmine/lib/jasmine-core/jasmine',
        'jasmine-jquery': 'bower/jasmine-jquery/lib/jasmine-jquery',

        'ckeditor': 'bower/ckeditor/ckeditor',
        'ckeditor-sharedspace': 'lib/ckeditor-sharedcontainer/plugin',

        'moment': 'bower/momentjs/moment',
        'zeroclipboard': 'bower/zeroclipboard/ZeroClipboard',
        'sockjs': 'bower/sockjs/sockjs',
        'cytoscape': 'bower/cytoscape/cytoscape',
        'jit': 'bower/jit/Jit/jit'
    }
});

</script>

<script>
require(['i18n'], function(i18n){
    i18n({
        'ajaxerror-message' : "{{ gettext('Unfortunately, something went wrong. Please, reload your browser.') }}",

        'ideaPanel-clearConfirmationMessage' : "{{ gettext('Do you confirm removing all segments ?') }}",
        'ideaPanel-deleteIdeaConfirmMessage' : "{{ gettext('Do you confirm deleting this idea ?') }}",
        'ideaPanel-cantDeleteByChildren' : "{{ gettext('You cannot delete an idea which has children ideas.') }}",
        'ideaPanel-cantDeleteBySegments' : "{{ gettext('You cannot delete an idea which has segments attached.') }}",

        'segmentList-clearConfirmationMessage': "{{ gettext('Do you confirm removing all segments ?') }}",

        'Add the description': "{{ gettext('Add the description') }}",
        'New Idea': "{{ gettext('New Idea') }}",

        'Add a title': "{{ gettext('Add a title') }}",
        'Add an introduction': "{{ gettext('Add an introduction') }}",
        'Add a conclusion': "{{ gettext('Add a conclusion') }}",

        'Sending...': "{{ gettext('Sending...') }}",
        'Do you want to publish the synthesis?': "{{ gettext('Do you want to publish the synthesis?') }}",
        'Add to clipboard': "{{ gettext('Add to clipboard') }}",

        "Synthesis published!": "{{ gettext('Synthesis published!') }}",
        'You must be logged in to create segments': "{{ gettext('You must be logged in to create segments') }}",
        'react': "{{ gettext('react') }}",
        '[synthesis] {0}': "{{ gettext('[synthesis] {0}') }}",
        'The root idea will not be in the synthesis': "{{ gettext('The root idea will not be in the synthesis') }}",
        'All posts': "{{ gettext('All posts') }}"
    });
});
</script>
<script type="text/javascript">requirejs(["main"]);</script>
