<script>
document.write('<script src="/static/js/lib/'
    +('__proto__' in {} ? 'zepto' : 'jquery')
    +'.min.js"><\/script>');
</script>

<script>
    var app = {};

    !function($){
        app.Accordion = function (){
            'use strict';

            var self = this,
                DATA_HEIGHT = 'data-accordion-height';

            function onHeaderClick(ev){
                var area = $(ev.currentTarget).parent();

                if( area.hasClass('is-open') ){
                    self.closeArea( area );
                } else {
                    self.openArea( area );
                }

            }

            this.openArea = function(area){
                var body = area.find('.accordion-body'),
                    height = self.getBodyHeight(body);

                area.addClass('is-open');
                body.css('height', height);
            };

            this.closeArea = function(area){
                area
                    .removeClass('is-open')
                    .find('.accordion-body')
                    .css('height', '0px');
            }

            this.getBodyHeight = function(body){
                var height = body.attr(DATA_HEIGHT);

                if( height == null ){

                    body.css({
                        position: 'absolute',
                        height: 'auto',
                        visibility: 'hidden'
                    });

                    height = body.height();

                    body
                        .css({
                            position: 'static',
                            height: '0px',
                            overflow: 'hidden',
                            visibility: 'visible'
                        })
                        .attr(DATA_HEIGHT, height+'px');
                }

                return height;
            };

            this.init = function( scope ){
                $('.accordion-header', scope).on('click', onHeaderClick);
            };

        };

        (new app.Accordion).init();
    }(window.jQuery || window.Zepto);

</script>

<script>
    !function($){
        var body = $(document.body),
            lateralMenuButton = $('#lateralmenu-button');

        lateralMenuButton.click(function(ev){
            body.toggleClass( 'is-lateralmenu-open' );
        });

        $('.lateralmenu-modal').on('click', function(){
            lateralMenuButton.trigger('click');
        });

    }(window.jQuery || window.Zepto);

    $(function(){
        $(document.body).removeClass( 'preload' );
    });
</script>